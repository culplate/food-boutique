{"version":3,"file":"commonHelpers2.js","sources":["../src/js/pagination.js","../src/js/fetch.js","../src/img/svg/check.svg","../src/js/products.js","../src/js/filters.js","../src/js/popap.js","../src/main.js"],"sourcesContent":["import Pagination from 'tui-pagination';\nimport fetchFilteredProducts from './filters';\n\nconst container = document.getElementById('pagination');\nlet visiblePages = 0;\n\nconst screenWidth = window.innerWidth;\nif (screenWidth < 768) {\n   // Мобільні пристрої\n   visiblePages = 2;\n} else {\n   // Таблет\n   visiblePages = 4;\n}\n\nexport function addPagination(pages, limit, currentPage) {\n\n   const options = {\n      totalItems: pages.totalPages * limit,\n      itemsPerPage: limit,\n      visiblePages: visiblePages,\n      page: currentPage,\n      centerAlign: false,\n      // firstItemClassName: 'tui-first-child',\n      // lastItemClassName: 'tui-last-child',\n      template: {\n         page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n         currentPage:\n            '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n         moveButton:\n            '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n            '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n            '</a>',\n         disabledMoveButton:\n            '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n            '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n            '</span>',\n         moreButton:\n            '<a href=\"#\" class=\"tui-page-btn tui-is-disabled tui-{{type}}-is-ellip\">' +\n            '<span class=\"tui-ico-ellip\">...</span>' +\n            '</a>',\n      },\n   };\n   const pagination = new Pagination(container, options);\n   pagination.on('afterMove', event => {\n      const currentPage = event.page;\n      var filters = JSON.parse(localStorage.getItem('filters')) || {};\n      filters.page = currentPage;\n      localStorage.setItem('filters', JSON.stringify(filters));\n      fetchFilteredProducts();\n   });\n}\nexport function deletePagination() {\n   container.innerHTML = '';\n}","import axios from 'axios';\nimport { addPagination, deletePagination } from './pagination';\n\nexport async function fetchProductsAll(\n  category,\n  keyword,\n  page,\n  limit,\n  sortMethod\n) {\n  try {\n    const params = {\n      keyword: keyword || '',\n      category: category || '',\n      page: page || 1,\n      limit: limit || 6,\n    };\n\n    // Додаємо спосіб сортування до параметрів запиту, якщо він існує\n    if (sortMethod) {\n      params.sort = sortMethod;\n    }\n\n    const response = await axios({\n      method: 'get',\n      url: 'https://food-boutique.b.goit.study/api/products',\n      params: params,\n    });\n    if (response.data.totalPages > 1) {\n      addPagination(response.data, limit, page);\n    } else {\n      deletePagination();\n    }\n    return response.data.results;\n  } catch (error) {\n    console.error('Error fetching products:', error);\n    return []; // повертаємо порожній масив у випадку помилки\n  }\n}\n\nexport async function fetchProducts(select) {\n  const response = await axios(\n    `https://food-boutique.b.goit.study/api/products/${select}`\n  );\n  return response.data;\n}\n","export default \"__VITE_ASSET__317232e2__\"","import {\n  createMarkupProductsAll,\n  createMarkupPopularProducts,\n  createMarkupProductsDiscount,\n} from './template.js';\nimport check from '../img/svg/check.svg';\nimport { fetchProductsAll, fetchProducts } from './fetch.js';\nimport addCounter from './cart-header-counter.js';\n\nconst containerAll = document.querySelector('.products-container');\nconst containerPopular = document.querySelector('.popular-container');\nconst containerDiscount = document.querySelector('.discount-container');\n\nconst KEY = 'products in cart';\n\n// Функція для оновлення списку продуктів\nexport function updateProductsList(products) {\n  const container = document.querySelector('.products-container');\n  if (!products || products.length === 0) {\n    // Якщо продуктів немає, показуємо повідомлення\n    container.innerHTML = `<div class=\"cart-empty empty-filter\">\n           <h3 class=\"products-titel\">Nothing was found for the selected <span>filters...</span></h3>\n           <p class=\"filters-text-not-found\">Try adjusting your search parameters or browse our range by other criteria to find the perfect product for you.</p>\n       </div>`;\n  } else {\n    // Якщо продукти є, заповнюємо контейнер продуктами і приховуємо повідомлення, якщо воно було показано\n    container.innerHTML = createMarkupProductsAll(products);\n  }\n}\n\nexport function getProductsLimit() {\n  const screenWidth = window.innerWidth;\n  if (screenWidth < 768) {\n    // Мобільні пристрої\n    return 6;\n  } else if (screenWidth >= 768 && screenWidth < 1440) {\n    // Таблет\n    return 8;\n  } else if (screenWidth > 1440) {\n    // Десктоп і вище\n    return 9;\n  }\n}\n\n// перемішування масиву та вибору випадкових продуктів\nfunction shuffleArray(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [array[i], array[j]] = [array[j], array[i]]; // Перемішування елементів\n  }\n}\n\nasync function renderPopular() {\n  try {\n    const data = await fetchProducts('popular');\n    const newData = removeUnderscores(data);\n    const randomData = getRandomProducts(newData, 5); // Вибірка 5 випадкових продуктів\n    containerPopular.innerHTML = createMarkupPopularProducts(randomData);\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nrenderPopular();\n\nfunction getRandomProducts(products, count) {\n  shuffleArray(products);\n  return products.slice(0, count);\n}\n\nasync function renderDiscount() {\n  try {\n    const data = await fetchProducts('discount');\n    const randomData = getRandomProducts(data, 2); // Вибірка 2 випадкових продуктів\n    containerDiscount.innerHTML = createMarkupProductsDiscount(randomData);\n  } catch (error) {\n    console.log(error.message);\n  }\n  return;\n}\n\ncontainerDiscount.addEventListener('click', addBtnClickDiscount);\n\nexport async function addBtnClickDiscount(event) {\n  if (\n    event.target.className === 'discount-link-basket' ||\n    event.target.className === 'discount-basket-icon' ||\n    event.target.className === 'discount-basket-icon'\n  ) {\n    const selectedItem = event.target.closest('.discount-list-item');\n\n    const selectedItemId = selectedItem.id;\n\n    try {\n      const currentProduct = await fetchProducts(selectedItemId);\n      const products = JSON.parse(localStorage.getItem(KEY)) ?? [];\n\n      const index = products.findIndex(item => item._id === selectedItemId);\n\n      if (index !== -1) {\n        products[index].quantity += 0;\n      } else {\n        currentProduct.quantity = 1;\n        products.push(currentProduct);\n        const button = selectedItem.querySelector('button');\n        button.disabled = true;\n        button.innerHTML = `<span class=\"icon-styles\">\n                     <img class=\"discount-basket-icon\" src=\"${check}\" alt=\"icon bascket\" width=\"18\" height=\"18\">\n\n                  </span>`;\n        button.classList.add('disabled');\n      }\n      localStorage.setItem(KEY, JSON.stringify(products));\n      addCounter();\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n  return;\n}\n\nrenderDiscount();\n\ncontainerAll.addEventListener('click', addBtnClick);\n\nexport async function addBtnClick(event) {\n  if (\n    event.target.nodeName === 'BUTTON' ||\n    event.target.className === 'add-btn' ||\n    event.target.nodeName === 'IMG'\n  ) {\n    const selectedItem = event.target.closest('.list-item-body-price');\n\n    // Проверяем, есть ли родительский элемент\n    if (selectedItem && selectedItem.parentElement) {\n      const selectedItemId = selectedItem.parentElement.id;\n\n      try {\n        const currentProduct = await fetchProducts(selectedItemId);\n        const products = JSON.parse(localStorage.getItem(KEY)) ?? [];\n\n        const index = products.findIndex(item => item._id === selectedItemId);\n\n        if (index !== -1) {\n          products[index].quantity += 0;\n        } else {\n          currentProduct.quantity = 1;\n          products.push(currentProduct);\n          //==========\n          const button = selectedItem.querySelector('button');\n          button.disabled = true;\n          button.innerHTML = `<img src=\"${check}\" alt=\"icon check\" width=\"18\" height=\"18\">`;\n          button.classList.add('disabled');\n          //=========\n        }\n        localStorage.setItem(KEY, JSON.stringify(products));\n        addCounter();\n      } catch (error) {\n        console.error(error.message);\n      }\n    }\n  }\n  return;\n}\n\ncontainerPopular.addEventListener('click', addBtnClickPopularCard);\n\nasync function addBtnClickPopularCard(event) {\n  if (\n    event.target.nodeName === 'BUTTON' ||\n    event.target.className === 'popular-basket-img'\n  ) {\n    const selectedItem = event.target.closest('.product-popular-card');\n    const selectedItemId = selectedItem.id;\n    const button = selectedItem.querySelector('button');\n    button.disabled = true;\n\n    try {\n      const currentProduct = await fetchProducts(selectedItemId);\n      const products = JSON.parse(localStorage.getItem(KEY)) ?? [];\n\n      const index = products.findIndex(item => item._id === selectedItemId);\n\n      if (index !== -1) {\n        products[index].quantity += 0;\n      } else {\n        currentProduct.quantity = 1;\n        products.push(currentProduct);\n        button.innerHTML = `<img class=\"popular-disadbled-img\" src=\"${check}\" alt=\"icon bascket\" width=\"20\" height=\"20\">`;\n        button.classList.add('popular-disadbled-btn');\n      }\n      localStorage.setItem(KEY, JSON.stringify(products));\n      addCounter();\n    } catch (error) {\n      console.log(error.message);\n      button.disabled = false;\n    }\n  }\n  return;\n}\n","import SlimSelect from 'slim-select';\nimport { fetchProductsAll } from './fetch.js';\nimport { updateProductsList } from './products.js';\n\nlet isFetching = false;\n\nfunction debounce(func, wait, immediate) {\n  let timeout;\n  return function () {\n    const context = this,\n      args = arguments;\n    const later = function () {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  initializeFilters();\n\n  setupEventListeners();\n  fetchInitialProducts();\n  initializeSortSelect();\n  fetchCategories();\n\n  const searchBox = document.getElementById('search-box');\n  const categoriesSelect = document.getElementById('categories');\n  const sortOptionsSelect = document.getElementById('sort-options');\n  const savedFilters = getSavedFilters();\n\n  searchBox.value = savedFilters.keyword || '';\n  categoriesSelect.value = savedFilters.category || '';\n  sortOptionsSelect.value = savedFilters.sort || '';\n\n  fetchFilteredProducts();\n});\n\nconst searchForm = document.querySelector('.search-form');\n\nsearchForm.addEventListener('submit', function (e) {\n  e.preventDefault();\n  const keyword = document.getElementById('search-box').value.trim();\n  updateFilters('keyword', keyword);\n  fetchFilteredProducts();\n  resetPage();\n});\n\nfunction handleResize() {\n  const width = window.innerWidth;\n  const isMobile = width < 768;\n\n  const isTablet = width >= 768 && width < 1150;\n\n  let limit = 6; // По умолчанию 6 карточек\n\n  if (isTablet) {\n    limit = 8; // Для планшета 8 карточек\n  } else if (width >= 1150) {\n    limit = 9; // Для 1440 шириной 9 карточек\n  }\n\n  const filters = getSavedFilters();\n  filters.limit = limit;\n  localStorage.setItem('filters', JSON.stringify(filters));\n\n  fetchFilteredProducts();\n}\n\nwindow.addEventListener('resize', debounce(handleResize, 300));\n\nasync function fetchCategories() {\n  try {\n    const response = await fetch(\n      'https://food-boutique.b.goit.study/api/products/categories'\n    );\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const categories = await response.json();\n    if (categories && categories.length > 0) {\n      populateCategorySelect(categories);\n    } else {\n      console.error('No categories found');\n    }\n  } catch (error) {\n    console.error('Error fetching categories:', error);\n  }\n}\n\nfunction populateCategorySelect(categories) {\n  const selectElement = document.getElementById('categories');\n  selectElement.innerHTML = '';\n\n  const modifiedCategories = [\n    { text: 'Show all', value: '' },\n    ...categories.map(category => ({\n      text: category.replace(/_/g, ' '),\n      value: category,\n    })),\n  ];\n\n  new SlimSelect({\n    select: '#categories',\n    placeholder: 'Categories',\n    showSearch: false,\n    data: modifiedCategories,\n  });\n}\n\nfunction initializeSortSelect() {\n  new SlimSelect({\n    select: '#sort-options',\n    data: [\n      { text: 'A to Z', value: 'byABC_Asc' },\n      { text: 'Z to A', value: 'byABC_Desc' },\n      { text: 'Cheap', value: 'byPrice_Asc' },\n      { text: 'Expensive', value: 'byPrice_Desc' },\n      { text: 'Popular', value: 'byPopularity_Asc' },\n      { text: 'Not popular', value: 'byPopularity_Desc' },\n      { text: 'Show all', value: 'showAll' },\n    ],\n  });\n}\n\nfunction setupEventListeners() {\n  const categoriesSelect = document.getElementById('categories');\n  const sortOptionsSelect = document.getElementById('sort-options');\n\n  categoriesSelect.addEventListener('change', handleFilterChange);\n  sortOptionsSelect.addEventListener('change', handleFilterChange);\n}\n\nfunction handleFilterChange() {\n  const selectedCategory = document.getElementById('categories').value;\n  const selectedSortOption = document.getElementById('sort-options').value;\n\n  updateFilters('category', selectedCategory);\n  updateFilters('sort', selectedSortOption);\n\n  fetchFilteredProducts();\n  resetPage();\n}\n\nfunction resetPage() {\n  updateFilters('page', 1);\n}\n\nasync function fetchFilteredProducts() {\n  if (isFetching) return;\n  isFetching = true;\n\n  const filters = getSavedFilters();\n  const { category, keyword, page, limit, sort } = filters;\n\n  try {\n    const products = await fetchProductsAll(\n      category,\n      keyword,\n      page,\n      limit,\n      sort\n    );\n\n    if (!Array.isArray(products)) {\n      throw new Error('Response is not an array of products');\n    }\n\n    switch (sort) {\n      case 'byABC_Asc':\n        products.sort((a, b) => a.name.localeCompare(b.name));\n        break;\n      case 'byABC_Desc':\n        products.sort((a, b) => b.name.localeCompare(a.name));\n        break;\n      case 'byPrice_Asc':\n        products.sort((a, b) => a.price - b.price);\n        break;\n      case 'byPrice_Desc':\n        products.sort((a, b) => b.price - a.price);\n        break;\n      case 'byPopularity_Asc':\n        products.sort((a, b) => a.popularity - b.popularity);\n        break;\n      case 'byPopularity_Desc':\n        products.sort((a, b) => b.popularity - a.popularity);\n        break;\n    }\n\n    updateProductsList(products);\n  } catch (error) {\n    console.error('Error fetching products:', error);\n    updateProductsList([]);\n  } finally {\n    isFetching = false;\n  }\n}\n\nfunction initializeFilters() {\n  if (!localStorage.getItem('filters')) {\n    resetFilters();\n  }\n}\n\nfunction updateFilters(key, value) {\n  const filters = getSavedFilters();\n  filters[key] = value;\n  localStorage.setItem('filters', JSON.stringify(filters));\n}\n\nfunction resetFilters() {\n  localStorage.setItem(\n    'filters',\n    JSON.stringify({ keyword: null, category: null, page: 1, limit: 6 })\n  );\n}\n\nfunction getSavedFilters() {\n  return JSON.parse(localStorage.getItem('filters')) || resetFilters();\n}\n\nfunction fetchInitialProducts() {\n  fetchFilteredProducts();\n}\nexport default fetchFilteredProducts;\n","import { createMarkupModal } from './template';\nimport { addBtnClickDiscount, addBtnClick } from './products';\nimport * as basicLightBox from 'basiclightbox';\nimport { fetchProducts } from './fetch';\n// BasicLightBox modal\nconst mainProducts = document.querySelector('.products-container');\nconst popularProducts = document.querySelector('.popular-container');\nconst discountProducts = document.querySelector('.discount-container');\n\nmainProducts.addEventListener('click', openModal);\npopularProducts.addEventListener('click', openModal);\ndiscountProducts.addEventListener('click', openModal);\n\nfunction openModal(event) {\n  if (\n    event.target === event.currentTarget ||\n    event.target.nodeName === 'BUTTON' ||\n    event.target.className === 'add-btn' ||\n    event.target.className === 'popular-basket-img' ||\n    event.target.className === 'icon-styles' ||\n    event.target.className === 'discount-basket-icon' ||\n    event.target.alt === 'icon bascket'\n  ) {\n    return;\n  }\n\n  if (event.target.closest('.discount-list-item') !== null) {\n    const targetProduct = event.target.closest('.discount-list-item');\n    const targetProductId = targetProduct.id;\n    renderProductModal(targetProductId, event);\n  }\n\n  if (event.target.closest('.list-item') !== null) {\n    const targetProduct = event.target.closest('.list-item');\n    const targetProductId = targetProduct.id;\n    renderProductModal(targetProductId, event);\n  }\n\n  if (event.target.closest('.product-popular-card') !== null) {\n    const targetProduct = event.target.closest('.product-popular-card');\n    const targetProductId = targetProduct.id;\n    renderProductModal(targetProductId, event);\n  }\n}\n\nasync function renderProductModal(id, e) {\n  try {\n    const data = [await fetchProducts(id)];\n    const closeWithEsc = evt => {\n      if (instance.visible() && evt.key === 'Escape') {\n        instance.close();\n      }\n    };\n    const instance = basicLightBox.create(createMarkupModal(data), {\n      onClose: instance =>\n        document.removeEventListener('keydown', closeWithEsc),\n      onClose: instance =>\n        modalContainer\n          .querySelector('.add-btn')\n          .removeEventListener('click', addBtnClick),\n      onClose: instance =>\n        modalContainer.removeEventListener('click', modalClose),\n    });\n    instance.show();\n    document.addEventListener('keydown', closeWithEsc);\n\n    const modalContainer = document.querySelector(\n      '.basicLightbox__placeholder'\n    );\n    modalContainer\n      .querySelector('.add-btn')\n      .addEventListener('click', addBtnClick);\n    modalContainer.addEventListener('click', modalClose);\n\n    function modalClose(evt) {\n      if (\n        evt.target.className === 'remove-btn' ||\n        evt.target.className === 'remove-btn-img'\n      ) {\n        instance.close();\n      }\n      return;\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n","// Експорт функції шапки сайту ховати при прокрутці та показувати\nimport { handleHeaderScroll } from './js/base-js/scroll';\n// Експорт функції попапу\n// Імпорт стилів модалки\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\n// визов функції ховати та показувати шапку сайту\nhandleHeaderScroll();\n"],"names":["container","visiblePages","screenWidth","addPagination","pages","limit","currentPage","options","Pagination","event","filters","fetchFilteredProducts","deletePagination","fetchProductsAll","category","keyword","page","sortMethod","params","response","axios","error","fetchProducts","select","check","containerAll","containerPopular","containerDiscount","KEY","updateProductsList","products","createMarkupProductsAll","shuffleArray","array","i","j","renderPopular","data","newData","randomData","getRandomProducts","createMarkupPopularProducts","count","renderDiscount","createMarkupProductsDiscount","addBtnClickDiscount","selectedItem","selectedItemId","currentProduct","index","item","button","addCounter","addBtnClick","addBtnClickPopularCard","isFetching","debounce","func","wait","immediate","timeout","context","args","later","callNow","initializeFilters","setupEventListeners","fetchInitialProducts","initializeSortSelect","fetchCategories","searchBox","categoriesSelect","sortOptionsSelect","savedFilters","getSavedFilters","searchForm","e","updateFilters","resetPage","handleResize","width","isTablet","categories","populateCategorySelect","selectElement","modifiedCategories","SlimSelect","handleFilterChange","selectedCategory","selectedSortOption","sort","a","b","resetFilters","key","value","mainProducts","popularProducts","discountProducts","openModal","targetProductId","renderProductModal","id","modalClose","evt","instance","closeWithEsc","basicLightBox.create","createMarkupModal","modalContainer","handleHeaderScroll"],"mappings":"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"}